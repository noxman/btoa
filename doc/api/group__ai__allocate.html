<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Arnold 4.2.14.2 API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Memory Allocation API</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga90f40cb89a13d0925f2adb4d2416406e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga90f40cb89a13d0925f2adb4d2416406e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AiMalloc</b>(_size)              &#160;&#160;&#160;<a class="el" href="group__ai__allocate.html#ga081ea71a1a913dbc0d8bd51a2e539a2a">AiMalloc_func</a>(_size, __AI_FILE__, __AI_LINE__, __AI_FUNCTION__)</td></tr>
<tr class="separator:ga90f40cb89a13d0925f2adb4d2416406e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ab5163416cde7beb7da8e6819c76755"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7ab5163416cde7beb7da8e6819c76755"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AiRealloc</b>(_addr,  _size)&#160;&#160;&#160;<a class="el" href="group__ai__allocate.html#gad3ea935c03f07a9dc78fe7a5b0460e91">AiRealloc_func</a>(_addr, _size, __AI_FILE__, __AI_LINE__, __AI_FUNCTION__)</td></tr>
<tr class="separator:ga7ab5163416cde7beb7da8e6819c76755"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1386a098338b7c8ccc4ec67f50e8e820"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1386a098338b7c8ccc4ec67f50e8e820"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>AiFree</b>(_addr)                  &#160;&#160;&#160;<a class="el" href="group__ai__allocate.html#gab640707a19dbccadfbb924552de2fd49">AiFree_func</a>(_addr, __AI_FILE__, __AI_LINE__, __AI_FUNCTION__)</td></tr>
<tr class="separator:ga1386a098338b7c8ccc4ec67f50e8e820"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga081ea71a1a913dbc0d8bd51a2e539a2a"><td class="memItemLeft" align="right" valign="top">AI_API void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ai__allocate.html#ga081ea71a1a913dbc0d8bd51a2e539a2a">AiMalloc_func</a> (size_t size, const char *file, int line, const char *func)</td></tr>
<tr class="memdesc:ga081ea71a1a913dbc0d8bd51a2e539a2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arnold <code>malloc()</code> wrapper.  <a href="#ga081ea71a1a913dbc0d8bd51a2e539a2a">More...</a><br /></td></tr>
<tr class="separator:ga081ea71a1a913dbc0d8bd51a2e539a2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad3ea935c03f07a9dc78fe7a5b0460e91"><td class="memItemLeft" align="right" valign="top">AI_API void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ai__allocate.html#gad3ea935c03f07a9dc78fe7a5b0460e91">AiRealloc_func</a> (void *addr, size_t size, const char *file, int line, const char *func)</td></tr>
<tr class="memdesc:gad3ea935c03f07a9dc78fe7a5b0460e91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arnold <code>realloc()</code> wrapper.  <a href="#gad3ea935c03f07a9dc78fe7a5b0460e91">More...</a><br /></td></tr>
<tr class="separator:gad3ea935c03f07a9dc78fe7a5b0460e91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab640707a19dbccadfbb924552de2fd49"><td class="memItemLeft" align="right" valign="top">AI_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ai__allocate.html#gab640707a19dbccadfbb924552de2fd49">AiFree_func</a> (void *addr, const char *file, int line, const char *func)</td></tr>
<tr class="memdesc:gab640707a19dbccadfbb924552de2fd49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arnold <code>free()</code> wrapper.  <a href="#gab640707a19dbccadfbb924552de2fd49">More...</a><br /></td></tr>
<tr class="separator:gab640707a19dbccadfbb924552de2fd49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacfaf073f530067151c4aa3e8cf969622"><td class="memItemLeft" align="right" valign="top">AI_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ai__allocate.html#gacfaf073f530067151c4aa3e8cf969622">AiAddMemUsage</a> (<a class="el" href="group__ai__types.html#ga94ff728c015fcdf228576b3806184f85">AtInt64</a> size, const char *category)</td></tr>
<tr class="memdesc:gacfaf073f530067151c4aa3e8cf969622"><td class="mdescLeft">&#160;</td><td class="mdescRight">Track allocated memory by named category.  <a href="#gacfaf073f530067151c4aa3e8cf969622">More...</a><br /></td></tr>
<tr class="separator:gacfaf073f530067151c4aa3e8cf969622"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga081ea71a1a913dbc0d8bd51a2e539a2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AI_API void* AiMalloc_func </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Arnold <code>malloc()</code> wrapper. </p>
<p>Use this function just as you would use <code>malloc()</code> to request a block of memory. If the size requested is 0, then return NULL. If the internal call to <code>malloc()</code> returns NULL, which means there is not enough available memory for a block of that size, this function logs an error message with the source code location (file and line number) of the failed call. This is a very useful debugging tip that wouldn't be possible with a regular call to <code>malloc()</code>.</p>
<p>To save some typing, Arnold provides a handy AiMalloc() macro. The following two lines of code are equivalent: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;ptr = AiMalloc_func(1024, __FILE__, __LINE__, __FUNCTION__);</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;ptr = AiMalloc(1024);</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>number of bytes to allocate </td></tr>
    <tr><td class="paramname">file</td><td>filename of the compilation unit calling <a class="el" href="group__ai__allocate.html#ga081ea71a1a913dbc0d8bd51a2e539a2a" title="Arnold malloc() wrapper. ">AiMalloc_func()</a> </td></tr>
    <tr><td class="paramname">line</td><td>line-number of the compilation unit calling <a class="el" href="group__ai__allocate.html#ga081ea71a1a913dbc0d8bd51a2e539a2a" title="Arnold malloc() wrapper. ">AiMalloc_func()</a> </td></tr>
    <tr><td class="paramname">func</td><td>function the compilation unit calling <a class="el" href="group__ai__allocate.html#ga081ea71a1a913dbc0d8bd51a2e539a2a" title="Arnold malloc() wrapper. ">AiMalloc_func()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if succesful, pointer to a newly allocated memory block, NULL otherwise</dd></dl>
<dl class="section see"><dt>See also</dt><dd>AiMalloc, AiFree, <a class="el" href="group__ai__shader__util.html#gaf2bcfd0e80384d9f7cbd456b9e985bb1" title="Allocates temporary memory for this ray-tree. ">AiShaderGlobalsQuickAlloc</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gad3ea935c03f07a9dc78fe7a5b0460e91"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AI_API void* AiRealloc_func </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Arnold <code>realloc()</code> wrapper. </p>
<p>Checks for NULL and logs an error message. If the requested size is 0, then the address is freed instead. In practice, you will want to use the associated shortcut macro AiRealloc().</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>the address of the memory block to resize </td></tr>
    <tr><td class="paramname">size</td><td>number of bytes to allocate </td></tr>
    <tr><td class="paramname">file</td><td>filename of the compilation unit calling <a class="el" href="group__ai__allocate.html#gad3ea935c03f07a9dc78fe7a5b0460e91" title="Arnold realloc() wrapper. ">AiRealloc_func()</a> </td></tr>
    <tr><td class="paramname">line</td><td>line-number of the compilation unit calling <a class="el" href="group__ai__allocate.html#gad3ea935c03f07a9dc78fe7a5b0460e91" title="Arnold realloc() wrapper. ">AiRealloc_func()</a> </td></tr>
    <tr><td class="paramname">func</td><td>function of the compilation unit calling <a class="el" href="group__ai__allocate.html#gad3ea935c03f07a9dc78fe7a5b0460e91" title="Arnold realloc() wrapper. ">AiRealloc_func()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to a newly allocated memory block or NULL</dd></dl>
<dl class="section see"><dt>See also</dt><dd>AiRealloc </dd></dl>

</div>
</div>
<a class="anchor" id="gab640707a19dbccadfbb924552de2fd49"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AI_API void AiFree_func </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Arnold <code>free()</code> wrapper. </p>
<p>Releases allocated memory from AiMalloc() and AiRealloc(). Works just like <code>free()</code>. In practice, you will want to use the associated shortcut macro AiFree().</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>the address of the memory block to release </td></tr>
    <tr><td class="paramname">file</td><td>filename of the compilation unit calling <a class="el" href="group__ai__allocate.html#gab640707a19dbccadfbb924552de2fd49" title="Arnold free() wrapper. ">AiFree_func()</a> </td></tr>
    <tr><td class="paramname">line</td><td>line-number of the compilation unit calling <a class="el" href="group__ai__allocate.html#gab640707a19dbccadfbb924552de2fd49" title="Arnold free() wrapper. ">AiFree_func()</a> </td></tr>
    <tr><td class="paramname">func</td><td>function of the compilation unit calling <a class="el" href="group__ai__allocate.html#gab640707a19dbccadfbb924552de2fd49" title="Arnold free() wrapper. ">AiFree_func()</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>AiFree </dd></dl>

</div>
</div>
<a class="anchor" id="gacfaf073f530067151c4aa3e8cf969622"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AI_API void AiAddMemUsage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ai__types.html#ga94ff728c015fcdf228576b3806184f85">AtInt64</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>category</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Track allocated memory by named category. </p>
<p>You can track amounts of memory in your code you allocate (with positive values) and deallocate (with negative values). The totals will be displayed at the end of each <a class="el" href="group__ai__render.html#ga4464021f603cb0c4301d88b5c1c9cdd6">AiRender()</a> call in the logged memory stats. This is only valid to call in between <a class="el" href="group__ai__render.html#ga0db5fe141c9fb602bdbf86a4d9cb77f7">AiBegin()</a> and <a class="el" href="group__ai__render.html#gaeeda065dc5f0ef34f5e7621f5811eb4d">AiEnd()</a>, but it can and should be used inside of any plugins as well as in session API usage.</p>
<dl class="section warning"><dt>Warning</dt><dd>If you call this from threads your own code spawns, this memory tracking will be slower than if it is called from within Arnold threads.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>The size of the allocation (if positive) or deallocation (if negative) </td></tr>
    <tr><td class="paramname">category</td><td>Name of the category for the allocation/deallocation </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<br>
<!--We could define a thematic change here by using the tag <hr class="footer"/> -->
<div id="geninfo" style="text-align: center;">
 <font size=-2 color=#C9C9C9>&copy 2009-2016 Solid Angle SL &middot all rights reserved &middot <a href="http://www.solidangle.com"><font size=-2 color=#C9C9C9>www.solidangle.com</font></a></font>
 <div id="geninfo" style="text-align: right; margin-top: 10 px; margin-right: 10px;">
 </div>
</div>
</body>
</html>
